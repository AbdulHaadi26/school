(this.webpackJsonpschool=this.webpackJsonpschool||[]).push([[0],{40:function(e,t,n){e.exports=n(71)},45:function(e,t,n){},68:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(45),n(6)),l=n(7),s=n(9),u=n(10),p=n(72),m=n(18),d=n(17),h=n(19),f=n.n(h),b=n(34),g="LOGIN_REQ",y="LOGIN_SUC",v="LOGIN_ERR",E="CUR_USER_SUC",O="CUR_USER_ERR",j=n(35),x=n.n(j).a.create({baseURL:"https://schoolk.herokuapp.com/api"}),k=n(5),w=Object(k.a)(),L=v,S=g,I=y,N=E,C=O,R=function(e){return function(t){localStorage.setItem("token",e),t(U())}},U=function(){return function(e){null===localStorage.getItem("token")?e({type:C}):e({type:N})}},_=n(8),A={padding:"24px 24px 24px 24px",outline:"none !important",fontFamily:"''Montserrat', sans-serif",boxShadow:"none !important",fontSize:"16px",marginTop:"12px"},T={borderRadius:"20px",marginTop:"16px"},F=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={email:"",password:""},a.handleInput=a.handleInput.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"handleInput",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this.state,n=t.email,a=t.password,r=this.props.loginUser;(e.preventDefault(),n&&a)&&r({email:n,password:a})}},{key:"renderLoader",value:function(){if(this.props.isLoading)return r.a.createElement("div",{className:"spinner-border",style:{width:"1rem",height:"1rem"},role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")," ")}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.password,o=this.props,c=o.err,i=o.isError;return r.a.createElement("form",{className:"col-lg-5 col-11",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"12px"}},r.a.createElement("input",{type:"text",className:"form-control",style:A,name:"email",value:n,placeholder:"Your work email",onChange:this.handleInput,required:!0})),r.a.createElement("div",{className:"input-group mb-3",style:{marginTop:"12px"}},r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a,style:A,onChange:this.handleInput,placeholder:"Your password",required:!0})),r.a.createElement("button",{className:"btn btn-block btn-login",style:T,type:"submit"},"Login ",this.renderLoader()),i&&r.a.createElement("h6",{style:{width:"100%",textAlign:"center",marginTop:"16px",color:"red",fontSize:"13px !important",fontWeight:"500"}},c))}}]),n}(a.Component),z=Object(_.b)((function(e){return{isError:e.Login.isError,isLoading:e.Login.isLoading,err:e.Login.data}}),{loginUser:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:S}),t.prev=1,t.next=4,x.post("/account/auth",e);case 4:(a=t.sent).data&&!a.data.error&&a.data.token?(n(R(a.data.token)),n({type:I})):n({type:L,payload:a.data.error}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:L,payload:"Email or password is incorrect"});case 11:case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})(F),D=(n(68),{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"auto",marginRight:"auto"}),G={fontSize:"38px",fontWeight:"bold",color:"#40739e",fontFamily:"'Montserrat', sans-serif"},q={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"};var J=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid d-flex justify-content-center p-0 log-form"},r.a.createElement("div",{className:"col-11 p-0",style:D},r.a.createElement("h6",{style:G},"School System")),r.a.createElement("div",{className:"col-12",style:q},r.a.createElement(z,null)))}}]),n}(a.Component),M=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.logOut;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return e()}},"Logout"))}}]),n}(a.Component),W=Object(_.b)(null,{logOut:function(){return function(e){localStorage.removeItem("token"),e({type:C}),w.push("/")}}})(M);var Y=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/students",component:W}),r.a.createElement(p.b,{render:function(){return r.a.createElement(p.a,{to:"/students"})}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",component:J}),r.a.createElement(p.b,{render:function(){return r.a.createElement(p.a,{to:"/login"})}})))}}]),n}(a.Component),B=Object(_.b)((function(e){return{auth:e.Auth.auth}}))(Y),Q=(n(70),n(11)),H=n(12),K=v,P=g,V=y,X=O,Z=E,$=Object(Q.c)({Login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isSuccess:!1,isError:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(H.a)({},e,{isLoading:!0,isError:!1,isSuccess:!1});case V:return Object(H.a)({},e,{isSuccess:!0,isLoading:!1,isError:!1,data:t.payload});case K:return Object(H.a)({},e,{isError:!0,isLoading:!1,isSuccess:!1,data:t.payload});default:return e}},Auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(H.a)({},e,{auth:!1});case Z:return Object(H.a)({},e,{auth:!0});default:return e}}}),ee=n(38),te=Object(Q.d)($,Object(Q.a)(ee.a));c.a.render(r.a.createElement(_.a,{store:te},r.a.createElement(p.c,{history:w},r.a.createElement(B,null))),document.getElementById("root"))}},[[40,1,2]]]);
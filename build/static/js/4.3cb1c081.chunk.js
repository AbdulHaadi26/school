(this.webpackJsonpschool=this.webpackJsonpschool||[]).push([[4],{87:function(e,t,a){"use strict";a.d(t,"c",(function(){return f})),a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return v}));var n=a(13),s=a.n(n),r=a(17),l=a(1),c=a(15),o=a(20),i=l.a.RReq,u=l.a.RErr,p=l.a.RSuc,m=l.a.RGErr,d=l.a.RGReq,h=l.a.RGSuc,f=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:i}),t.prev=1,t.next=4,c.a.post("/result/register",e);case 4:(n=t.sent).data.Result&&!n.data.error?(a({type:p}),o.a.push("/options")):a({type:u,payload:n.data.error}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:u,payload:"Somthing unexpected occured"});case 11:case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},g={data:[],count:0},y=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(a){var n,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:d}),t.prev=1,n=c.a.post("/result/getResultCountAll",e,{headers:{authorization:"".concat(localStorage.getItem("token"))}}),r=c.a.post("/result/getResultAll",e,{headers:{authorization:"".concat(localStorage.getItem("token"))}}),t.next=6,n;case 6:return l=t.sent,t.next=9,r;case 9:!(o=t.sent).data.resultList||null==l.data.resultCount||l.data.error||o.data.error?a({type:m,payload:g}):(g.data=o.data.resultList,g.count=l.data.resultCount,a({type:h,payload:g})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),a({type:m,resultList:g});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(a){var n,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:d}),t.prev=1,n=c.a.post("/result/searchResultCount",e,{headers:{authorization:"".concat(localStorage.getItem("token"))}}),r=c.a.post("/result/searchResult",e,{headers:{authorization:"".concat(localStorage.getItem("token"))}}),t.next=6,n;case 6:return l=t.sent,t.next=9,r;case 9:!(o=t.sent).data.resultList||null==l.data.resultCount||l.data.error||o.data.error?a({type:m,payload:g}):(g.data=o.data.resultList,g.count=l.data.resultCount,a({type:h,payload:g})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),a({type:m,payload:g});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}},93:function(e,t,a){"use strict";a.r(t);var n=a(31),s=a(4),r=a(5),l=a(30),c=a(6),o=a(7),i=a(0),u=a.n(i),p=a(23),m=a(19),d=a(87),h=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:"",sClass:10,sSec:"All",string:"",limit:0,limitCheck:25},n.handleInput=n.handleInput.bind(Object(l.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.sClass,a=e.sSec,n=e.skip;(0,this.props.fetchResult)({opt1:t,opt2:a,limit:n})}},{key:"handleInput",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"handleSelectA",value:function(e){var t=e.target.options.selectedIndex;e.target.options[t].getAttribute("data-key")&&this.setState({sSec:e.target.options[t].getAttribute("data-key")})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.sClass,n=t.sSec,s=t.skip,r=t.string,l=this.props,c=l.fetchResult,o=l.fetchResultSearch,i={string:r,opt1:a,opt2:n,limit:s};this.setState({limit:0}),console.log(r),r?o(i):c(i)}},{key:"fetchNext",value:function(e,t){e.preventDefault();var a=this.props,n=a.fetchResult,s=a.fetchResultSearch,r=this.state,l=r.limit,c=r.string,o=r.sSec,i=r.sClass,u=r.limitCheck;if(u<t){var p={limit:l+1,string:c,opt1:i,opt2:o},m=u+25;this.setState({limitCheck:m,limit:l+1}),c?s(p):n(p)}}},{key:"fetchPrev",value:function(e,t){e.preventDefault();var a=this.props,n=a.fetchResult,s=a.fetchResultSearch,r=this.state,l=r.limit,c=r.string,o=r.sSec,i=r.sClass,u=r.limitCheck;if(u>25){var p={limit:l-1,string:c,opt1:i,opt2:o},m=u-25;this.setState({limitCheck:m,limit:l-1}),c?s(p):n(p)}}},{key:"handleSelect",value:function(e){var t=e.target.options.selectedIndex;e.target.options[t].getAttribute("data-key")&&this.setState({sClass:e.target.options[t].getAttribute("data-key")})}},{key:"renderClassSelect",value:function(){return[1,2,3,4,5].map((function(e){return u.a.createElement("option",{"data-key":e,key:e},"Class ",e)}))}},{key:"renderNav",value:function(e){var t=this;return e>25?u.a.createElement("div",{className:"col-11 d-flex flex-row justify-content-between",style:{marginTop:"30px",marginBottom:"30px"}},u.a.createElement("button",{className:"btn btn-secondary",onClick:function(a){return t.fetchPrev(a,e)}},u.a.createElement("span",{className:"fa fa-chevron-left"})),u.a.createElement("button",{className:"btn btn-secondary",onClick:function(a){return t.fetchNext(a,e)}},u.a.createElement("span",{className:"fa fa-chevron-right"}))):u.a.createElement(u.a.Fragment,null)}},{key:"renderList",value:function(e){return e.map((function(e){return u.a.createElement("div",{key:e._id,className:"col-11 list-div d-flex flex-row"},u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},e.name),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},e.roll),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},"Class ",e.cls," (",e.section,")"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},u.a.createElement(p.a,{to:"/students/".concat(e._id,"/result")},"Add Result")))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.sClass,n=t.sSec,s=t.string,r=this.props,l=r.isLoading,c=r.isSuccess,o=r.isError,i=r.list,p=[],m=0;return c&&(p=i.data,m=i.count),u.a.createElement("form",{className:"col-12 d-flex flex-column align-items-center",onSubmit:function(t){return e.handleSubmit(t)}},u.a.createElement("h6",{className:"student-heading col-lg-8 col-11",style:{marginTop:"30px",textAlign:"center",fontSize:"40px"}},"Student List"),u.a.createElement("div",{className:"col-lg-6 col-11 d-flex justify-content-end"},u.a.createElement("div",{className:"input-group col-12",style:{marginTop:"30px",marginBottom:"30px"}},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Student's name",name:"string",value:s,onChange:function(t){e.handleInput(t)}}),u.a.createElement("div",{className:"input-group-append"},u.a.createElement("select",{className:"custom-select",onChange:function(t){return e.handleSelect(t)},defaultValue:a},u.a.createElement("option",{"data-key":10},"All Classes"),u.a.createElement("option",{"data-key":0},"KG"),this.renderClassSelect()),u.a.createElement("select",{className:"custom-select",onChange:function(t){return e.handleSelectA(t)},defaultValue:n},u.a.createElement("option",{"data-key":"All"},"All Sections"),u.a.createElement("option",{"data-key":"A"},"Section A"),u.a.createElement("option",{"data-key":"B"},"Section B")),u.a.createElement("button",{className:"btn btn-outline-secondary",type:"submit"},u.a.createElement("span",{className:"fa fa-search"}))))),u.a.createElement("div",{className:"col-11 list-div d-flex flex-row"},u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Name"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Roll No"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Class"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Operations")),!o&&c&&p.length>0&&this.renderList(p),!o&&c&&p.length>0&&this.renderNav(m),(o||p.length<=0)&&!l&&u.a.createElement("h6",{className:"col-11",style:{textAlign:"center",marginTop:"120px"}},"Could not find any student"),l&&u.a.createElement("div",{className:"spinner-border",style:{width:"5rem",height:"5rem",marginTop:"120px"},role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")," "))}}]),a}(i.Component);t.default=Object(m.b)((function(e){return{list:e.ResultList.data,isSuccess:e.ResultList.isSuccess,isLoading:e.ResultList.isLoading,isError:e.ResultList.isError}}),{fetchResult:d.a,fetchResultSearch:d.b})(h)}}]);
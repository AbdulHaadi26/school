(this.webpackJsonpschool=this.webpackJsonpschool||[]).push([[8],{97:function(e,t,a){"use strict";a.r(t);var s=a(32),n=a(5),l=a(6),i=a(31),c=a(7),r=a(8),o=a(0),u=a.n(o),m=a(16),d=a(19),h=a(33),p=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={sSes:"",sId:"",name:"",sClass:10,sSec:"All",string:"",limit:0,limitCheck:25},s.handleInput=s.handleInput.bind(Object(i.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.sClass,a=e.sSec,s=e.skip,n=this.props,l=n.fetchResult,i=n.session;i&&i.length>0&&(this.setState({sSes:i[0].name,sId:i[0]._id}),l({sesId:i[0]._id,opt1:t,opt2:a,limit:s}))}},{key:"handleInput",value:function(e){this.setState(Object(s.a)({},e.target.name,e.target.value))}},{key:"handleSelectA",value:function(e){var t=e.target.options.selectedIndex;e.target.options[t].getAttribute("data-key")&&this.setState({sSec:e.target.options[t].getAttribute("data-key")})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.sClass,s=t.sSec,n=t.skip,l=t.string,i=t.sId,c=this.props,r=c.fetchResult,o=c.fetchResultSearch,u={sesId:i,string:l,opt1:a,opt2:s,limit:n};this.setState({limit:0}),l?o(u):r(u)}},{key:"fetchNext",value:function(e,t){e.preventDefault();var a=this.props,s=a.fetchResult,n=a.fetchResultSearch,l=this.state,i=l.limit,c=l.string,r=l.sSec,o=l.sClass,u=l.limitCheck,m=l.sId;if(u<t){var d={limit:i+1,string:c,opt1:o,opt2:r},h=u+25;this.setState({sesId:m,limitCheck:h,limit:i+1}),c?n(d):s(d)}}},{key:"handleSelectB",value:function(e){var t=e.target.options.selectedIndex;e.target.options[t].getAttribute("data-key")&&this.setState({sSes:e.target.options[t].getAttribute("data-name"),sId:e.target.options[t].getAttribute("data-key")})}},{key:"fetchPrev",value:function(e,t){e.preventDefault();var a=this.props,s=a.fetchResult,n=a.fetchResultSearch,l=this.state,i=l.limit,c=l.string,r=l.sSec,o=l.sClass,u=l.limitCheck,m=l.sId;if(u>25){var d={sesId:m,limit:i-1,string:c,opt1:o,opt2:r},h=u-25;this.setState({limitCheck:h,limit:i-1}),c?n(d):s(d)}}},{key:"handleSelect",value:function(e){var t=e.target.options.selectedIndex;e.target.options[t].getAttribute("data-key")&&this.setState({sClass:e.target.options[t].getAttribute("data-key")})}},{key:"renderClassSelect",value:function(){return[1,2,3,4,5].map((function(e){return u.a.createElement("option",{"data-key":e,key:e},"Class ",e)}))}},{key:"renderNav",value:function(e){var t=this;return e>25?u.a.createElement("div",{className:"col-11 d-flex flex-row justify-content-between",style:{marginTop:"30px",marginBottom:"30px"}},u.a.createElement("button",{className:"btn btn-secondary",onClick:function(a){return t.fetchPrev(a,e)}},u.a.createElement("span",{className:"fa fa-chevron-left"})),u.a.createElement("button",{className:"btn btn-secondary",onClick:function(a){return t.fetchNext(a,e)}},u.a.createElement("span",{className:"fa fa-chevron-right"}))):u.a.createElement(u.a.Fragment,null)}},{key:"renderList",value:function(e){return e.map((function(e){return u.a.createElement("div",{key:e._id,className:"col-11 list-div d-flex flex-row"},u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},u.a.createElement(d.a,{to:"/students/result/update/".concat(e._id)},e.name)),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},e.roll),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},"Class ",e.cls," (",e.section,")"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center"}},e.percentage,"%"))}))}},{key:"renderSesList",value:function(){return this.props.session.map((function(e){return u.a.createElement("option",{key:e._id,"data-key":e._id,"data-name":e.name},e.name)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.sClass,s=t.sSec,n=t.string,l=t.sSes,i=this.props,c=i.isLoading,r=i.isSuccess,o=i.isError,m=i.list,d=i.session,h=[],p=0;return r&&(h=m.data,p=m.count),u.a.createElement("form",{className:"col-12 d-flex flex-column align-items-center",onSubmit:function(t){return e.handleSubmit(t)}},u.a.createElement("h6",{className:"student-heading col-lg-8 col-11",style:{marginTop:"30px",textAlign:"center",fontSize:"40px"}},"Student Result"),u.a.createElement("div",{className:"col-lg-6 col-11 d-flex justify-content-end"},u.a.createElement("div",{className:"input-group col-12",style:{marginTop:"30px",marginBottom:"30px"}},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Student's name",name:"string",value:n,onChange:function(t){e.handleInput(t)}}),u.a.createElement("div",{className:"input-group-append"},u.a.createElement("select",{className:"custom-select",onChange:function(t){return e.handleSelect(t)},defaultValue:a},u.a.createElement("option",{"data-key":10},"All Classes"),u.a.createElement("option",{"data-key":0},"KG"),this.renderClassSelect()),u.a.createElement("select",{className:"custom-select",onChange:function(t){return e.handleSelectA(t)},defaultValue:s},u.a.createElement("option",{"data-key":"All"},"All Sections"),u.a.createElement("option",{"data-key":"A"},"Section A"),u.a.createElement("option",{"data-key":"B"},"Section B")),u.a.createElement("select",{className:"custom-select",onChange:function(t){return e.handleSelectB(t)},defaultValue:l},d.length>0&&this.renderSesList(),d.length<=0&&u.a.createElement("option",{key:0},"No session found")),u.a.createElement("button",{className:"btn btn-outline-secondary",type:"submit"},u.a.createElement("span",{className:"fa fa-search"}))))),u.a.createElement("div",{className:"col-11 list-div d-flex flex-row"},u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Name"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Roll No"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Class"),u.a.createElement("h6",{className:"col-lg-3",style:{textAlign:"center",fontWeight:"bold"}},"Percentage")),!o&&r&&h.length>0&&this.renderList(h),!o&&r&&h.length>0&&this.renderNav(p),(o||h.length<=0)&&!c&&u.a.createElement("h6",{className:"col-11",style:{textAlign:"center",marginTop:"120px"}},"Could not find any result"),c&&u.a.createElement("div",{className:"spinner-border",style:{width:"5rem",height:"5rem",marginTop:"120px"},role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")," "))}}]),a}(o.Component);t.default=Object(m.b)((function(e){return{list:e.ResultList.data,isSuccess:e.ResultList.isSuccess,isLoading:e.ResultList.isLoading,isError:e.ResultList.isError}}),{fetchResult:h.a,fetchResultSearch:h.b})(p)}}]);